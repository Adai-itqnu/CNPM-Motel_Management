<div class="my-rooms-container">
  <div class="page-header">
    <h1>PhÃ²ng Cá»§a TÃ´i</h1>
    <p class="subtitle">Quáº£n lÃ½ cÃ¡c phÃ²ng báº¡n Ä‘ang thuÃª</p>
  </div>

  <!-- Loading State -->
  <div class="loading-state" *ngIf="isLoading">
    <div class="spinner"></div>
    <p>Äang táº£i...</p>
  </div>

  <!-- Error State -->
  <div class="error-state" *ngIf="error && !isLoading">
    <p>{{ error }}</p>
    <button class="btn btn-primary" (click)="loadMyRooms()">Thá»­ láº¡i</button>
  </div>

  <!-- Empty State -->
  <div class="empty-state" *ngIf="!isLoading && !error && rooms.length === 0">
    <div class="empty-icon">ğŸ </div>
    <h3>Báº¡n chÆ°a thuÃª phÃ²ng nÃ o</h3>
    <p>HÃ£y Ä‘áº·t phÃ²ng Ä‘á»ƒ báº¯t Ä‘áº§u</p>
    <a routerLink="/user/dashboard" class="btn btn-primary">Xem PhÃ²ng Trá»‘ng</a>
  </div>

  <!-- Rooms List -->
  <div class="rooms-grid" *ngIf="!isLoading && rooms.length > 0">
    <div class="room-card" *ngFor="let item of rooms">
      <!-- Room Image -->
      <div class="room-image">
        <img [src]="getRoomImage(item.room)" [alt]="item.room.name">
        <span class="status-badge" [ngClass]="getStatusClass(item.contractStatus)">
          {{ getStatusLabel(item.contractStatus) }}
        </span>
      </div>

      <!-- Room Info -->
      <div class="room-content">
        <h3 class="room-name">{{ item.room.name }}</h3>
        
        <div class="room-details">
          <div class="detail-item">
            <span class="label">Loáº¡i phÃ²ng:</span>
            <span class="value">{{ item.room.roomType }}</span>
          </div>
          <div class="detail-item">
            <span class="label">Diá»‡n tÃ­ch:</span>
            <span class="value">{{ item.room.area }} mÂ²</span>
          </div>
          <div class="detail-item">
            <span class="label">Táº§ng:</span>
            <span class="value">{{ item.room.floor }}</span>
          </div>
          <div class="detail-item">
            <span class="label">GiÃ¡ thuÃª:</span>
            <span class="value price">{{ item.monthlyPrice | number:'1.0-0' }} VNÄ/thÃ¡ng</span>
          </div>
        </div>

        <!-- Contract Info -->
        <div class="contract-info">
          <div class="info-row">
            <span class="label">NgÃ y báº¯t Ä‘áº§u:</span>
            <span class="value">{{ formatDate(item.startDate) }}</span>
          </div>
          <div class="info-row">
            <span class="label">NgÃ y káº¿t thÃºc:</span>
            <span class="value">{{ formatDate(item.endDate) }}</span>
          </div>
          <div class="info-row" *ngIf="item.checkInDate && item.contractStatus === 'Draft'">
            <span class="label">NgÃ y nháº­n phÃ²ng:</span>
            <span class="value highlight">{{ formatDate(item.checkInDate) }}</span>
          </div>
        </div>

        <!-- Actions -->
        <div class="room-actions">
          <button 
            class="btn btn-checkin" 
            *ngIf="item.canCheckIn"
            [disabled]="checkingIn"
            (click)="checkIn(item.bookingId)">
            <span *ngIf="!checkingIn">ğŸ”‘ Nháº­n PhÃ²ng</span>
            <span *ngIf="checkingIn">Äang xá»­ lÃ½...</span>
          </button>
          
          <div class="waiting-checkin" *ngIf="item.contractStatus === 'Draft' && !item.canCheckIn">
            <span class="waiting-icon">â³</span>
            <span>Chá» Ä‘áº¿n ngÃ y {{ formatDate(item.checkInDate!) }} Ä‘á»ƒ nháº­n phÃ²ng</span>
          </div>

          <div class="active-contract" *ngIf="item.contractStatus === 'Active'">
            <span class="active-icon">âœ…</span>
            <span>Äang thuÃª</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
