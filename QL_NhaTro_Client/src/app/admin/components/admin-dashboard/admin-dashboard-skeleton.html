<!-- Skeleton Loading -->
<div *ngIf="isLoading" class="skeleton-container">
  <!-- Skeleton Stats -->
  <div class="stats-grid">
    <div class="stat-card skeleton" *ngFor="let i of [1,2,3]">
      <div class="skeleton-icon"></div>
      <div class="skeleton-text"></div>
      <div class="skeleton-number"></div>
    </div>
  </div>
  
  <!-- Skeleton Chart -->
  <div class="chart-skeleton"></div>
</div>

<!-- Real Content -->
<div *ngIf="!isLoading">
  <!-- Stats Cards -->
  <div class="stats-grid">
    <div class="stat-card" *ngFor="let stat of stats">
      <div class="stat-icon">
        <span class="material-icons">{{ stat.icon }}</span>
      </div>
      <div class="stat-content">
        <p class="stat-label">{{ stat.label }}</p>
        <h3 class="stat-value">{{ stat.value }}</h3>
        <div *ngIf="stat.trend" class="stat-trend" [class.trend-up]="stat.trendPositive">
          <span>{{ stat.trend }}</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Charts Section -->
  <div class="charts-section">
    <div class="charts-row">
      <div class="chart-card">
        <h3>Trạng thái phòng</h3>
        <div class="donut-container">
          <svg width="180" height="180" viewBox="0 0 180 180">
            <defs>
              <linearGradient id="gradient1" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#667eea;stop-opacity:1"></stop>
                <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1"></stop>
              </linearGradient>
              <linearGradient id="gradient2" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#10b981;stop-opacity:1"></stop>
                <stop offset="100%" style="stop-color:#059669;stop-opacity:1"></stop>
              </linearGradient>
            </defs>
            <circle cx="90" cy="90" r="70" fill="none" stroke="#f1f5f9" stroke-width="30"></circle>
            <circle cx="90" cy="90" r="70" fill="none" stroke="url(#gradient1)" stroke-width="30" 
                    [attr.stroke-dasharray]="roomStatus.occupied + ' ' + (100 - roomStatus.occupied)" transform="rotate(-90 90 90)"></circle>
            <circle cx="90" cy="90" r="70" fill="none" stroke="url(#gradient2)" stroke-width="30" 
                    [attr.stroke-dasharray]="roomStatus.available + ' ' + (100 - roomStatus.available)" 
                    [attr.transform]="'rotate(' + (roomStatus.occupied * 3.6 - 90) + ' 90 90)'"></circle>
            <text x="90" y="85" text-anchor="middle" font-size="28" font-weight="700" fill="#1e293b">
              {{ roomStatus.total }}
            </text>
            <text x="90" y="105" text-anchor="middle" font-size="12" fill="#64748b">
              Tổng phòng
            </text>
          </svg>
          <div class="legend">
            <div class="legend-item">
              <span class="legend-color occupied"></span>
              <span>Đã thuê ({{ roomStatus.occupied }}%)</span>
            </div>
            <div class="legend-item">
              <span class="legend-color available"></span>
              <span>Còn trống ({{ roomStatus.available }}%)</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
/* Skeleton Styles */
.skeleton-container {
  animation: fadeIn 0.3s;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.skeleton {
  position: relative;
  overflow: hidden;
  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
  background-size: 200% 100%;
  animation: loading 1.5s infinite;
}

@keyframes loading {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

.skeleton-icon {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background: #e0e0e0;
}

.skeleton-text {
  height: 14px;
  width: 100px;
  margin: 10px 0;
  border-radius: 4px;
  background: #e0e0e0;
}

.skeleton-number {
  height: 28px;
  width: 150px;
  border-radius: 4px;
  background: #e0e0e0;
}

.chart-skeleton {
  height: 300px;
  margin-top: 20px;
  border-radius: 10px;
  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
  background-size: 200% 100%;
  animation: loading 1.5s infinite;
}
</style>
