<div class="payment-history-container">
  <div class="page-header">
    <h1>L·ªãch S·ª≠ Thanh To√°n</h1>
    <p class="subtitle">Xem c√°c giao d·ªãch thanh to√°n c·ªßa b·∫°n</p>
  </div>

  <!-- Stats -->
  <div class="stats-row" *ngIf="!isLoading && payments.length > 0">
    <div class="stat-card">
      <span class="stat-value">{{ payments.length }}</span>
      <span class="stat-label">T·ªïng giao d·ªãch</span>
    </div>
    <div class="stat-card deposit">
      <span class="stat-value">{{ depositPayments.length }}</span>
      <span class="stat-label">Ti·ªÅn c·ªçc</span>
    </div>
    <div class="stat-card bill">
      <span class="stat-value">{{ billPayments.length }}</span>
      <span class="stat-label">H√≥a ƒë∆°n</span>
    </div>
    <div class="stat-card total">
      <span class="stat-value">{{ formatCurrency(totalAmount) }}</span>
      <span class="stat-label">T·ªïng thanh to√°n</span>
    </div>
  </div>

  <!-- Loading -->
  <div class="loading-state" *ngIf="isLoading">
    <div class="spinner"></div>
    <p>ƒêang t·∫£i...</p>
  </div>

  <!-- Error -->
  <div class="error-state" *ngIf="error && !isLoading">
    <p>{{ error }}</p>
    <button class="btn btn-primary" (click)="loadPayments()">Th·ª≠ l·∫°i</button>
  </div>

  <!-- Empty State -->
  <div class="empty-state" *ngIf="!isLoading && !error && payments.length === 0">
    <div class="empty-icon">üí≥</div>
    <h3>Ch∆∞a c√≥ giao d·ªãch n√†o</h3>
    <p>L·ªãch s·ª≠ thanh to√°n s·∫Ω xu·∫•t hi·ªán sau khi b·∫°n th·ª±c hi·ªán giao d·ªãch</p>
  </div>

  <!-- Payments List -->
  <div class="payments-list" *ngIf="!isLoading && payments.length > 0">
    <div class="payment-card" *ngFor="let payment of payments">
      <div class="payment-icon" [ngClass]="getPaymentTypeClass(payment.paymentType)">
        <span *ngIf="payment.paymentType === 'Deposit'">üè†</span>
        <span *ngIf="payment.paymentType !== 'Deposit'">üìÑ</span>
      </div>
      
      <div class="payment-info">
        <div class="payment-main">
          <span class="payment-type">{{ getPaymentTypeLabel(payment.paymentType) }}</span>
          <span class="payment-room">{{ payment.roomName }}</span>
          <span class="payment-desc" *ngIf="payment.billMonth">
            Th√°ng {{ payment.billMonth }}/{{ payment.billYear }}
          </span>
        </div>
        <div class="payment-meta">
          <span class="payment-date">{{ formatDate(payment.paymentDate) }}</span>
          <span class="payment-method">{{ payment.paymentMethod }}</span>
          <span class="txn-id" *ngIf="payment.providerTxnId">M√£ GD: {{ payment.providerTxnId }}</span>
        </div>
      </div>

      <div class="payment-right">
        <span class="payment-amount">{{ formatCurrency(payment.amount) }}</span>
        <span class="status-badge" [ngClass]="getStatusClass(payment.status)">
          {{ getStatusLabel(payment.status) }}
        </span>
      </div>
    </div>
  </div>
</div>
